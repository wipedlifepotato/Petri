{% extends 'base.html.twig' %}

{% block title %}{{ 'dashboard.title'|trans }}{% endblock %}

{% block body %}
<div class="language-switcher">
    <a href="{{ path('app_set_locale', {'locale': 'ru'}) }}">RU</a> |
    <a href="{{ path('app_set_locale', {'locale': 'en'}) }}">EN</a>
</div>
<div class="dashboard-container">
    <h2>{{ 'dashboard.heading'|trans }}</h2>

    {% if message %}
        <p style="color:red">{{ message }}</p>
    {% endif %}

    {% if walletInfo %}
        <div class="wallet-info">
            <h3>{{ 'dashboard.wallet.btc'|trans }}</h3>
            <p>{{ 'dashboard.wallet.address'|trans }}: {{ walletInfo.address|default('-') }}</p>
            {% if walletInfo.balance is defined %}
                <p>{{ 'dashboard.wallet.balance'|trans }}: {{ walletInfo.balance }}</p>
            {% endif %}
        </div>

        <form method="POST">
            <h3>{{ 'dashboard.send_btc'|trans }}</h3>
            <label>{{ 'dashboard.send_to'|trans }}: <input type="text" name="to" required></label><br>
            <label>{{ 'dashboard.send_amount'|trans }}: <input type="text" name="amount" required></label><br>
            <button type="submit">{{ 'dashboard.send_button'|trans }}</button>
        </form>

        {% if sendResult %}
            <h4>{{ 'dashboard.send_result'|trans }}</h4>
            <pre>{{ sendResult }}</pre>
        {% endif %}
    {% endif %}

    <!-- Система фриланса -->
    <div class="card mb-4">
        <div class="card-header">
            <h3><i class="bi bi-briefcase"></i> Система фриланса</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3 mb-2">
                    <a href="{{ path('tasks') }}" class="btn btn-primary w-100">
                        <i class="bi bi-list-task"></i> Все задачи
                    </a>
                </div>
                <div class="col-md-3 mb-2">
                    <a href="{{ path('tasks', {'status': 'open'}) }}" class="btn btn-success w-100">
                        <i class="bi bi-search"></i> Найти работу
                    </a>
                </div>
                <div class="col-md-3 mb-2">
                    <a href="{{ path('task_create') }}" class="btn btn-info w-100">
                        <i class="bi bi-plus-circle"></i> Создать задачу
                    </a>
                </div>
                <div class="col-md-3 mb-2">
                    <a href="{{ path('disputes') }}" class="btn btn-warning w-100">
                        <i class="bi bi-exclamation-triangle"></i> Диспуты
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="links-block">
        <a href="{{ path('app_profiles') }}">{{ 'dashboard.link.profiles'|trans }}</a>
        <a href="{{ path('app_profile') }}">{{ 'dashboard.link.profile'|trans }}</a>
        <a href="{{ path('app_ticket') }}">{{ 'dashboard.link.tickets'|trans }}</a>
        {% if isAdmin %}
            <a href="{{ path('app_admin') }}">{{ 'dashboard.link.admin'|trans }}</a>
            <a href="{{ path('app_admin_tickets') }}">{{ 'dashboard.link.admin_tickets'|trans }}</a>
            <a href="{{ path('admin_disputes') }}">Управление диспутами</a>
        {% endif %}
        <a href="{{ path('app_chat') }}">{{ 'dashboard.link.chats'|trans }}</a>
        <a href="{{ path('app_login') }}">{{ 'dashboard.link.back'|trans }}</a>
    </div>
</div>
{% endblock %}

