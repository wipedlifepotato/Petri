{% extends 'base.html.twig' %}

{% block title %}{{ 'profile.title'|trans }}{% endblock %}

{% block body %}
<h2>{{ 'profile.heading'|trans({'%username%': username}) }}</h2>

{% if message %}
    <p style="color:red">{{ 'profile.error'|trans }}: {{ message|raw }}</p>
{% endif %}

{% if profile %}
    <form method="POST" enctype="multipart/form-data">
        <label>{{ 'profile.full_name'|trans }}:<br>
            <input type="text" name="full_name" value="{{ profile.full_name|default('') }}">
        </label><br><br>

        <label>{{ 'profile.bio'|trans }}:<br>
            <textarea name="bio">{{ profile.bio|default('') }}</textarea>
        </label><br><br>

        <label>{{ 'profile.skills'|trans }}:<br>
            <input type="text" name="skills" value="{{ profile.skills|default([])|join(',') }}">
        </label><br><br>

        <label>{{ 'profile.avatar'|trans }}:<br>
            {% if profile.avatar %}
                <img src="{{ profile.avatar }}" alt="{{ 'profile.avatar'|trans }}" style="max-width:100px;"><br>
            {% endif %}
            <input type="file" name="avatar">
            <input type="hidden" name="avatar_base64" value="{{ profile.avatar|default('') }}">
        </label><br><br>

        <button type="submit">{{ 'profile.save_button'|trans }}</button>
    </form>
{% endif %}

<p><a href="{{ path('app_dashboard') }}">{{ 'profile.back'|trans }}</a></p>
{% endblock %}

